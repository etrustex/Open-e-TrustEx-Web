<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration debug="true"
                     xmlns:log4j='http://jakarta.apache.org/log4j/'>

    <!--
    NOTE: Using TimeAndSizeRollingAppender from http://www.simonsite.org.uk/#timeandsize
    This allows us to configure zipping of old logs, daily rolls and controlling the number of backups.
    -->

    <!-- console appender -->
    <appender name="console" class="org.apache.log4j.ConsoleAppender">
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p [%t] %c{3} - %m%n"/>
        </layout>
    </appender>

    <!-- file appender that accepts all log message -->
    <appender name="trace-file" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="logs/etrustex-trace.log"/>
        <param name="Append" value="true"/>
        <param name="DatePattern" value="'.'yyyyMMdd"/>
        <param name="MaxFileSize" value="1024MB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p [%t] %c - %m%n"/>
        </layout>
    </appender>

    <!-- Log warnings/ errors per day -->
    <appender name="daily-errors" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="logs/etrustex-daily-errors.log"/>
        <param name="Threshold" value="WARN"/>
        <param name="Append" value="true"/>
        <param name="DatePattern" value="'.'yyyyMMdd"/>
        <param name="MaxFileSize" value="1024MB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p [%t] %c - %m%n"/>
        </layout>
    </appender>

    <!-- ECAS logging -->
    <appender name="ecas-file" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="logs/etrustex-ecas.log"/>
        <param name="Append" value="true"/>
        <param name="DatePattern" value="'.'yyyyMMdd"/>
        <param name="MaxFileSize" value="1024MB"/>
        <param name="MaxBackupIndex" value="10"/>
        <layout class="org.apache.log4j.PatternLayout">
            <param name="ConversionPattern" value="%d{ISO8601} %-5p [%t] %c - %m%n"/>
        </layout>
    </appender>

    <!-- Application -->
    <logger name="eu.europa.ec.digit.etrustex.mobile">
        <level value="trace"/>
    </logger>

    <!--
      START: Libraries
    -->
    <logger name="org">
        <level value="info"/>
    </logger>
    <logger name="com">
        <level value="info"/>
    </logger>

    <!-- Spring -->
    <logger name="org.springframework">
        <level value="info"/>
    </logger>
    <!-- Log web requests -->
    <logger name="org.springframework.web.filter.CommonsRequestLoggingFilter">
        <level value="DEBUG" />
    </logger>

    <!-- springfox for swagger -->
    <logger name="springfox">
        <level value="info"/>
    </logger>

    <!-- ECAS -->
    <logger name="eu.cec.digit.ecas" additivity="false">
        <level value="debug"/>
        <appender-ref ref="ecas-file"/>
        <appender-ref ref="daily-errors"/>
    </logger>
    <!--
      END: Libraries
    -->

    <root>
        <priority value="all"/>
        <appender-ref ref="console"/>
        <appender-ref ref="trace-file"/>
        <appender-ref ref="daily-errors"/>
    </root>

</log4j:configuration>